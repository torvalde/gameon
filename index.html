<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chand & Jan 40th Birthday</title>
    <link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">
    <style>
        html {
            box-sizing: border-box;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            background: #55BB45;
            margin: 0;
            text-align: center;
            overflow-x: hidden;
            padding: 0;
            height: 1100px;
        }

        body.loading {

        }

        body.loading main {
            width: 40px;
            height: 40px;
            background: #F39200;
            border-radius: 20px;
            position: absolute;
            bottom: 164px;
            left: calc(50% - 20px);
            animation: spinner 1s infinite;
        }

        @keyframes spinner {
            0% {
                transform: rotate(0deg);
            }
            50% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes zoom {
            0% {
                transform: scale(0);
            }
            100% {
                transform: scale(7.5);
            }
        }

        @keyframes count {
            100% {
                background-position: 0 -4950px;
            }
        }

        body.loading.done main {
            animation: zoom .3s forwards;
        }

        body.loading.done main:after {
            transform: scale(0);
        }

        body main {
            background: #F39200;
            width: 300px;
            height: 300px;
            position: absolute;
            left: calc(50% - 150px);
            top: 400px;
            border-radius: 150px;
        }

        body .star {
            background: url("star.svg") no-repeat center center;
            width: 368px;
            height: 368px;
            position: absolute;
            left: calc(50% - 184px);
            top: 234px;
        }

        body.loading .star {
            transform: scale(0) rotate(0deg);
            transition-duration: 500ms;
        }

        body.loading.done .star {
            transform: scale(1) rotate(-180deg);
        }

        #background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }

        body.loading #background {
            background: #55BB45;
            pointer-events: auto;
        }

        .diamond {
            position: absolute;
            width: 20vw;
            height: 30vw;
            background: url("diamond.svg") no-repeat center center;
            background-size: cover;
            display: block;
            transition-duration: 500ms;
        }

        body.open {
            background: white;
        }

        body.open .diamond {
            transform: scale(0);
        }

        .number {
            background: url('numbers.png') no-repeat top left;
            width: 255px;
            height: 550px;
        }

        body .number.single, body .number.double {
            display: block;
            position: absolute;
            top: -125px;
            transform: scale(.225);
        }

        body .number.single {
            left: 55px;
        }

        body .number.double {
            background-position: 0 -4400px;
            left: -10px;
        }

        body.loading .number.single, body.loading .number.double {
            background-position: 0 0;
            transform: scale(.03);
            display: block;
            position: absolute;
            top: -255px;
        }

        body.loading .number.single {
            left: -103px;
        }

        body.loading .number.double {
            left: -112px;
        }

        main.n00 .number.double, main.n0 .number.single {
            background-position: 0 0;
        }

        main.n10 .number.double, main.n1 .number.single {
            background-position: 0 -550px;
        }

        main.n20 .number.double, main.n2 .number.single {
            background-position: 0 -1100px;
        }

        main.n30 .number.double, main.n3 .number.single {
            background-position: 0 -1650px;
        }

        main.n40 .number.double, main.n4 .number.single {
            background-position: 0 -2200px;
        }

        main.n50 .number.double, main.n5 .number.single {
            background-position: 0 -2750px;
        }

        main.n60 .number.double, main.n6 .number.single {
            background-position: 0 -3300px;
        }

        main.n70 .number.double, main.n7 .number.single {
            background-position: 0 -3850px;
        }

        main.n80 .number.double, main.n8 .number.single {
            background-position: 0 -4400px;
        }

        main.n90 .number.double, main.n9 .number.single {
            background-position: 0 -4950px;
        }

        .title {
            width: 700px;
            height: 400px;
            position: relative;
            display: inline-block;
            margin-top: 40px;
        }

        .title video {
            position: absolute;
            top: 0;
            left: 0;
            background: #55BB45;
            pointer-events: none;
            width: 700px;
            height: 400px;
        }

        .title img {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        #map {
            transform: rotate(-960deg) scale(0);
            width: 400px;
            height: 400px;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transition-duration: 1.3s;
            transition-timing-function: ease-out;
            transition-delay: .9s;
            text-decoration: none;
            color: #00023D;
            margin-left: 220px;
        }

        #map.show {
            transform: rotate(10deg) scale(1);
        }

        #map img {
            width: 100%;
            height: 100%;
            border: 1px dotted #F39200;
        }

        #map figcaption {
            font-family: sans-serif;
            font-size: 12px;
        }

        #info {
            position: absolute;
            top: 560px;
            left: 50%;
            font-family: 'Poiret One', cursive;
            color: #00023D;
            font-size: 32px;
            text-align: left;
            background: white;
            border: 0 solid #00023D;
            border-radius: 2px;

            max-height: 0;
            max-width: 0;
            overflow: hidden;
            transition: max-width .3s linear, max-height .7s ease-out;
            transition-delay: 0s, .3s;
            padding: 0;
            margin-left: -580px;
        }

        #info.show {
            padding: 20px;
            border-width: 2px;
            max-width: 500px;
            max-height: 1000px;
        }

        #info h2 {
            font-size: 64px;
            margin: 0 0 10px;
            padding: 0;
            font-weight: normal;
        }

        #info h2 .firstLetter {
            font-size: 104px;
        }

        html.mobile body {
            height: 1500px;
        }
        html.mobile .star {
            transition-duration: 0s !important;
        }

        html.mobile body main {
            animation: zoom 0.0001s forwards !important;
        }
        html.mobile #map {
            margin-left: -200px;
            bottom: auto;
            top:620px;
            transition-duration: 0s;
            transition-delay: 0s;
        }
        html.mobile #map.show {
            transform: rotate(0deg) scale(1);
        }
        html.mobile #info {
            margin-left: 0;
            transition: max-width 0s linear, max-height 0s linear;
            transform: translateX(-50%);
            transition-delay: 0s, 0s;
            top: 1000px;
        }
    </style>
    <!-- AddEvent -->
    <script type="text/javascript" src="https://addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script>
</head>
<body class="loading">
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1139699719426319',
            xfbml: true,
            version: 'v2.6'
        });
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<div class='title'>
    <img src="chandjan.png" width="700" height="400" title="Chand and Jan"/>
    <video src="chandjan.mp4" preload="none" width="700" height="400"></video>
</div>
<div class="star"></div>
<main title="00">
    <span class="number double"></span><span class="number single"></span>
</main>
<a href="https://www.google.com/maps/dir//Norwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway/"
   id="map" target="_blank" title="Click the map to get directions...">
    <figure>
        <img src="http://maps.googleapis.com/maps/api/staticmap?center=Norwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway&zoom=12&scale=2&size=400x400&maptype=roadmap&key=AIzaSyDc6LzVMW1LnaEcQIVqQfnXUaJId4xHq-g&format=png&visual_refresh=true&markers=size:small%7Ccolor:0xff0000%7Clabel:0%7CNorwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway"
             alt="Google Map of Norwegian Museum of Science and Technology, Kjels책sveien 143, 0491 Oslo, Norway">
        <figcaption>Click the map for directions</figcaption>
    </figure>
</a>
<div id="info">
    <h2><span class="firstLetter">B</span>irthday Party</h2>
    29 October<br/>
    Norwegian Museum of<br/>
    Science and Technology<br/><br/>
    From 17:00 till the end<br/><br/>
    <div title="Add to Calendar" class="addeventatc">
        Add to Calendar
        <span class="start">10/29/2016 17:00</span>
        <span class="end">10/29/2016 24:00</span>
        <span class="timezone">Europe/Oslo</span>
        <span class="title">Birthday Party for Chand & Jan</span>
        <span class="description">Come celebrate 40 years of Chand and Jan!</span>
        <span class="location">Norwegian Museum of Science and Technology</span>
        <span class="organizer">Chand & Jan</span>
        <span class="organizer_email">torvalde@gmail.com</span>
        <span class="facebook_event">https://www.facebook.com/events/1711556715760706</span>
        <span class="all_day_event">false</span>
        <span class="date_format">MM/DD/YYYY</span>
    </div>
</div>
<script>
    var video = document.querySelector('.title video');
    var main = document.querySelector('body main');
    var a = navigator.userAgent||navigator.vendor||window.opera;
    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
        video.parentNode.removeChild(video);
        document.documentElement.className = 'mobile';
        document.body.classList.add('done');
        main.className = 'n40 n0';
        main.title = '40';
        document.getElementById('map').className = 'show';
        document.getElementById('info').className = 'show';
    } else {
        //document.documentElement.className = 'mobile';

        var countTo40 = function (i, after) {
            i++;
            if (i <= 40) {
                var one = i % 10;
                var ten = Math.floor(i / 10) + '0';
                main.className = 'n' + ten + ' n' + one;
                main.title = i;
                setTimeout(function () {
                    countTo40(i, after);
                }, 108);
            } else {
                after();
            }
        };

        var afterZoom = function () {
            document.body.removeEventListener('transitionend', afterZoom, false);
            video.play();
            countTo40(0, function () {

            });
        };

        video.addEventListener('loadeddata', function () {
            document.body.addEventListener('transitionend', afterZoom, false);
            document.body.classList.add('done');
            document.body.classList.add('zoom');
        }, false);

        video.addEventListener('ended', function () {
            video.parentNode.removeChild(video);
            document.getElementById('map').className = 'show';
            document.getElementById('info').className = 'show';
            setTimeout(function () {
                // document.body.className='open';
            }, 300);
        }, false);

        video.defaultPlaybackRate = 2.0;
        video.load();
    }
</script>
</body>
</html>