<!doctype html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">
    <style>
        body {
            background: white;
            margin: 0;
            padding: 0;
            overflow: hidden;
            text-align: center;
        }

        body.loading {

        }

        body.loading main {
            width: 40px;
            height: 40px;
            background: #F39200;
            border-radius: 20px;
            position: absolute;
            bottom: 164px;
            left: calc(50% - 20px);
            animation: spinner 1s infinite;
        }

        @keyframes spinner {
            0% {
                transform: rotate(0deg);
            }
            50% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes zoom {
            0% {
                transform: scale(0);
            }
            100% {
                transform: scale(7.5);
            }
        }

        @keyframes count {
            100% { background-position: 0 -4950px; }
        }

        body.loading.done main {
            animation: zoom .3s forwards;
        }

        body.loading.done main:after {
            transform: scale(0);
        }

        body main {
            background: #F39200;
            width: 300px;
            height: 300px;
            position: absolute;
            left: calc(50% - 150px);
            bottom: 34px;
            border-radius: 150px;
        }

        body .star {
            background: url("star.svg") no-repeat center center;
            width: 368px;
            height: 368px;
            position: absolute;
            left: calc(50% - 184px);
            bottom: 0;
        }

        body.loading .star {
            transform: scale(0) rotate(0deg);
            transition-duration: 500ms;
        }

        body.loading.done .star {
            transform: scale(1) rotate(-180deg);
        }

        section {
            height: 50%;
            min-height: 400px;
            width: 100%;
            min-width: 300px;
            position: relative;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        #background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }

        body.loading #background {
            background: #41B53F;
            pointer-events: auto;
        }

        .diamond {
            position: absolute;
            width: 20vw;
            height: 30vw;
            background: url("diamond.svg") no-repeat center center;
            background-size: cover;
            display: block;
            transition-duration: 500ms;
        }
        body.open {
            background: white;
        }
        body.open .diamond {
            transform: scale(0);
        }

        .number { background: url('numbers.png') no-repeat top left; width: 255px; height: 550px;  }

        body .number.single,body .number.double {
            display: block;
            position: absolute;
            top: -125px;
            transform: scale(.225);
        }
        body .number.single {
            left: 55px;
        }
        body .number.double {
            background-position: 0 -4400px;
            left: -10px;
        }
        body.loading .number.single,body.loading .number.double {
            background-position: 0 0;
            transform: scale(.03);
            display: block;
            position: absolute;
            top: -255px;
        }
        body.loading .number.single {
            left: -103px;
        }
        body.loading .number.double {
            left: -112px;
        }
        main.n00 .number.double, main.n0 .number.single {
            background-position: 0 0;
        }
        main.n10 .number.double, main.n1 .number.single {
         background-position: 0 -550px;
        }
        main.n20 .number.double, main.n2 .number.single {
            background-position: 0 -1100px;
        }
        main.n30 .number.double, main.n3 .number.single {
            background-position: 0 -1650px;
        }
        main.n40 .number.double, main.n4 .number.single {
            background-position: 0 -2200px;
        }
        main.n50 .number.double, main.n5 .number.single {
            background-position: 0 -2750px;
        }
        main.n60 .number.double, main.n6 .number.single {
            background-position: 0 -3300px;
        }
        main.n70 .number.double, main.n7 .number.single {
            background-position: 0 -3850px;
        }
        main.n80 .number.double, main.n8 .number.single {
            background-position: 0 -4400px;
        }
        main.n90 .number.double, main.n9 .number.single {
            background-position: 0 -4950px;
        }
        .years {
            width: 320px;
            height: 160px;
            position: relative;
            display: inline-block;
        }
        .years video {
            position: absolute;
            top: 0;
            left: 0;
            background: #41B53F;
            pointer-events: none;
        }
        .years img {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        #map {
            border: 3px solid #41B53F;
            transform: rotate(10deg);
            width: 400px;
            height: 400px;
            position: absolute;
            bottom: 10px;
            right: -20px;
        }
        #map img {
            width: 100%;
            height: 100%;
        }
        .info {
            position: absolute;
            top:30px;
            left:20px;
            font-family: 'Poiret One', cursive;
            color:black;
            font-size: 32px;
            text-align: left;
        }
        .info h2 {
            font-size: 64px;
            margin: 0 0 10px;
            padding: 0;
            font-weight: normal;
        }
    </style>
</head>
<body class="loading">
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '1139699719426319',
            xfbml      : true,
            version    : 'v2.6'
        });
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<a href="https://www.google.com/maps/dir//Norwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway/" id="map" target="_blank" title="Click the map to get directions...">
    <img src="http://maps.googleapis.com/maps/api/staticmap?center=Norwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway&zoom=12&scale=2&size=400x400&maptype=roadmap&key=AIzaSyDc6LzVMW1LnaEcQIVqQfnXUaJId4xHq-g&format=png&visual_refresh=true&markers=size:small%7Ccolor:0xff0000%7Clabel:0%7CNorwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway" alt="Google Map of Norwegian+Museum+of+Science+and+Technology,+Kjels책sveien+143,+0491+Oslo,+Norway">
</a>
<div class="info">
    <h2>Birthdayparty</h2>
    23 October<br/>
    Norwegian Museum of<br/>
    Science and Technology<br/><br/>
    From 17:00 till the end
</div>
<div id="background"></div>
<div id="backgroundOdd"></div>
<section>
    <div class="star"></div>
    <main title="00">
        <span class="number double"></span><span class="number single"></span>
    </main>
</section>
<div class='years'>
    <img src="years.png" width="320px" height="160px" title="years of Chand and Jan"/>
    <video src="years.mp4" preload='auto'/>
</div>
<script>
    var itemWidth = 20; //Math.ceil(window.innerWidth / 5);
    var rowHeight = 30; //Math.ceil(rowWidth * 1.5);
    var offsetTop = -rowHeight/2;
    while (offsetTop*(window.innerWidth/100) < window.innerHeight) {
        var offsetLeft = 0;
        for (var i = 0; i < 5; i++) {
            var e = document.createElement('div');
            e.className = "diamond";
            e.style.top = offsetTop+'vw';
            e.style.left = offsetLeft+'vw';
            document.getElementById('background').appendChild(e);
            offsetLeft += itemWidth;
        }
        offsetLeft = -itemWidth/2;
        offsetTop += rowHeight/2;
        for (var i = 0; i < 6; i++) {
            var e = document.createElement('div');
            e.className = "diamond";
            e.style.top = offsetTop+'vw';
            e.style.left = offsetLeft+'vw';
            document.getElementById('background').appendChild(e);
            offsetLeft += itemWidth;
        }
        offsetTop += rowHeight/2;
    }
    var video = document.querySelector('.years video');
    var main = document.querySelector('body main');
    var double = main.querySelector('.number.double');
    var single = main.querySelector('.number.single');

    var countTo80 = function(i, after) {
            i+=10;
        if (i<=80) {
            var one = i%10;
            var ten = Math.floor(i/10)+'0';
            main.className = 'n'+ten+' n'+one;
            main.title = i;
            setTimeout(function() {
                countTo80(i, after);
            }, 160);
        } else {
            after();
        }
    };

    var afterZoom = function () {
        document.body.removeEventListener('transitionend', afterZoom, false);
        countTo80(0, function() {
            video.play();
        });
    };

    video.addEventListener('loadeddata', function() {
        document.body.addEventListener('transitionend', afterZoom, false);
        document.body.classList.add('done');
        document.body.classList.add('zoom');
    }, false);

    video.addEventListener('ended', function() {
        video.parentNode.removeChild(video);
        setTimeout(function() {
            document.body.className='open';
        },300);
    }, false);

    video.defaultPlaybackRate = 3.0;
    video.load();
</script>
</body>
</html>